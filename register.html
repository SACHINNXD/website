<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Register</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, Helvetica, sans-serif;
}

body {
    background: #ffffff;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.form-box {
    width: 360px;
    border: 1px solid #ddd;
    padding: 24px;
    border-radius: 10px;
}

.form-box h2 {
    margin-bottom: 20px;
    text-align: center;
}

.form-box input {
    width: 100%;
    padding: 10px;
    margin-bottom: 12px;
    border: 1px solid #ccc;
    outline: none;
}

.password-box {
    position: relative;
}

.toggle-eye {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    font-size: 13px;
}

button {
    width: 100%;
    padding: 10px;
    border: none;
    background: #000;
    color: #fff;
    cursor: pointer;
}

.error {
    color: red;
    font-size: 13px;
    margin-bottom: 10px;
    display: none;
}

.switch {
    margin-top: 12px;
    text-align: center;
    font-size: 13px;
}
.switch a {
    text-decoration: underline;
    cursor: pointer;
}
</style>
</head>

<body>

<div class="form-box">
    <h2>Create Account</h2>

    <p class="error" id="errorMsg"></p>

    <input id="fname" placeholder="First Name">
    <input id="lname" placeholder="Last Name">
    <input id="email" placeholder="Email">

    <div class="password-box">
        <input id="password" type="password" placeholder="Password">
        <span class="toggle-eye" onclick="togglePass('password')">üëÅ</span>
    </div>

    <div class="password-box">
        <input id="confirm" type="password" placeholder="Confirm Password">
        <span class="toggle-eye" onclick="togglePass('confirm')">üëÅ</span>
    </div>

    <button onclick="registerUser()">Register</button>

    <div class="switch">
        Already have an account?
        <a href="login.html">Login</a>
    </div>
</div>

<script>
function togglePass(id) {
    const input = document.getElementById(id);
    input.type = input.type === "password" ? "text" : "password";
}

function registerUser() {
    const fname = fnameInput.value.trim();
    const lname = lnameInput.value.trim();
    const email = emailInput.value.trim();
    const pass = password.value;
    const confirmPass = confirm.value;
    const error = document.getElementById("errorMsg");

    if (!fname || !lname || /\d/.test(fname + lname)) {
        error.innerText = "Names cannot contain numbers";
        error.style.display = "block";
        return;
    }

    if (!email.includes("@")) {
        error.innerText = "Invalid email address";
        error.style.display = "block";
        return;
    }

    if (pass !== confirmPass) {
        error.innerText = "Passwords do not match";
        error.style.display = "block";
        return;
    }

    const users = JSON.parse(localStorage.getItem("users")) || [];

    if (users.some(u => u.email === email)) {
        error.innerText = "Email already registered";
        error.style.display = "block";
        return;
    }

    users.push({ email, password: pass, fname, lname });
    localStorage.setItem("users", JSON.stringify(users));

    window.location.href = "login.html";
}

// shorthand
const fnameInput = document.getElementById("fname");
const lnameInput = document.getElementById("lname");
const emailInput = document.getElementById("email");
</script>

</body>
</html>
